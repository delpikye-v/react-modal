import e,{useState as n,useLayoutEffect as o,useEffect as t}from"react";import{createPortal as l}from"react-dom";import{Hooks as a,HtmlUtils as c,CmUtils as d}from"@delpi/common";var i=function(e){var t=e.children,a=e.id,c=void 0===a?"portal-modal":a,d=n(null),i=d[0],m=d[1];return o((function(){return m(function(e){var n=document.getElementById(e);return n||((n=document.createElement("div")).setAttribute("id",e),document.body.appendChild(n),n)}(c)),function(){i&&i.parentNode&&i.parentNode.removeChild(i)}}),[c]),null===i?null:l(t,i)},m=function(o){var l=o.children,m=o.id,r=o.modalId,s=o.isOpen,u=o.center,v=void 0!==u&&u,f=o.className,E=o.showHeader,p=void 0===E||E,C=o.showFooter,b=void 0===C||C,h=o.modalTitle,N=void 0===h?e.createElement(e.Fragment,null,"Â "):h,g=o.modalHeader,k=o.modalFooter,w=o.showExtraButton,x=void 0!==w&&w,y=o.showAcceptButton,A=void 0===y||y,j=o.showCancelButton,B=void 0===j||j,F=o.showXClose,T=void 0===F||F,O=o.escapeClose,X=void 0===O||O,H=o.toggleTitleExpand,I=void 0!==H&&H,L=o.fullSceen,D=void 0!==L&&L,K=o.classNameAccept,R=o.classNameCancel,S=o.classNameExtra,q=o.labelAccept,z=void 0===q?"OK":q,G=o.labelCancel,J=void 0===G?"CANCEL":G,M=o.labelExtra,P=void 0===M?"EXTRA":M,Q=o.handleToggle,U=void 0===Q?function(){}:Q,V=o.handleAccept,W=void 0===V?function(){}:V,Y=o.handleCancel,Z=void 0===Y?function(){}:Y,$=o.hanldeXClose,_=o.handleExtra,ee=void 0===_?function(){}:_,ne=o.handleOpen,oe=void 0===ne?function(){}:ne,te=n(s),le=te[0],ae=te[1],ce=n(!1),de=ce[0],ie=ce[1];a.useEventListener("keydown",(function(e){X&&"Escape"===e.key&&me(!1)})),t((function(){ie(D)}),[D]),t((function(){ae(s)}),[s]);var me=function(e){ae(e),oe(e)};return le?e.createElement(i,{id:m},e.createElement("div",{id:r,className:c.joinClass("modal2",de&&"modal2-toggle",v&&"modal2-center",f)},e.createElement("div",{className:"modal2-content"},T&&e.createElement("button",{className:"modal2-close",onClick:function(){d.isFunc($)?$():me(!1)}},e.createElement("span",null,"x")),p&&e.createElement("div",{className:"modal2-header"},e.createElement("span",{className:c.joinClass("modal2-title",I&&"modal2-title-toggle"),onDoubleClick:function(){I&&(ie(!de),U())}},N),g),e.createElement("div",{className:"modal2-body"},l),b&&(k||e.createElement((function(){return e.createElement("div",{className:"modal2-footer"},B&&e.createElement("button",{className:c.joinClass("modal2-button modal2-secondary-button",R),onClick:function(){me(!1),Z()}},J),A&&e.createElement("button",{className:c.joinClass("modal2-button modal2-primary-button",K),onClick:function(){W()}},z),x&&e.createElement("button",{className:c.joinClass("modal2-button modal2-danger-button",S),onClick:function(){ee()}},P))}),null))))):null};export{i as ReactPortal,m as default};

import e,{useState as o,useLayoutEffect as t,useEffect as n}from"react";import{createPortal as l}from"react-dom";import{Hooks as a,HtmlUtils as i,CmUtils as d}from"@delpi/common";var c=function(){return e.createElement("svg",{fill:"currentColor",viewBox:"0 0 24 24",width:"1em",height:"1em"},e.createElement("path",{d:"M18.707 5.293a1 1 0 0 0-1.414 0L12 10.586 6.707 5.293a1 1 0 0 0-1.414 1.414L10.586 12l-5.293 5.293a1 1 0 1 0 1.414 1.414L12 13.414l5.293 5.293a1 1 0 0 0 1.414-1.414L13.414 12l5.293-5.293a1 1 0 0 0 0-1.414z"}))};var r=function(e){var n=e.children,a=e.id,i=void 0===a?"portal-modal":a,d=o(null),c=d[0],r=d[1];return t((function(){return r(function(e){var o=document.getElementById(e);return o||((o=document.createElement("div")).setAttribute("id",e),document.body.appendChild(o),o)}(i)),function(){c&&c.parentNode&&c.parentNode.removeChild(c)}}),[i]),null===c?null:l(n,c)},m=function(t){var l=t.children,m=t.id,s=t.modalId,u=t.isOpen,v=t.center,f=void 0!==v&&v,E=t.className,C=t.tabIndex,h=void 0===C?-1:C,p=t.showHeader,b=void 0===p||p,g=t.showFooter,N=void 0===g||g,w=t.modalTitle,k=void 0===w?e.createElement(e.Fragment,null):w,x=t.modalHeader,L=t.modalFooter,j=t.customizeXClose,A=t.alignFooter,B=void 0===A?"RIGHT":A,T=t.fullButtonhMobile,y=void 0===T||T,F=t.showExtraButton,I=void 0!==F&&F,R=t.showAcceptButton,X=void 0===R||R,H=t.showCancelButton,O=void 0===H||H,S=t.showXClose,z=void 0===S||S,D=t.disabledClose,M=void 0!==D&&D,G=t.escapeClose,K=void 0===G||G,q=t.outSideClose,J=void 0===q||q,P=t.showSplitBorder,Q=void 0===P||P,U=t.toggleTitleExpand,V=void 0!==U&&U,W=t.fullSceen,Y=void 0!==W&&W,Z=t.classNameAccept,$=t.classNameCancel,_=t.classNameExtra,ee=t.labelAccept,oe=void 0===ee?"OK":ee,te=t.labelCancel,ne=void 0===te?"CANCEL":te,le=t.labelExtra,ae=void 0===le?"EXTRA":le,ie=t.backdropDark,de=void 0!==ie&&ie,ce=t.handleToggle,re=void 0===ce?function(){}:ce,me=t.handleAccept,se=void 0===me?function(){}:me,ue=t.handleCancel,ve=void 0===ue?function(){}:ue,fe=t.handleEscapse,Ee=void 0===fe?function(){}:fe,Ce=t.handleXClose,he=t.handleExtra,pe=void 0===he?function(){}:he,be=t.handleOpen,ge=void 0===be?function(){}:be,Ne=e.useRef(null),we=o(u),ke=we[0],xe=we[1],Le=o(!1),je=Le[0],Ae=Le[1];a.useEventListener("keydown",(function(e){K&&"Escape"===e.key&&(Be(!1),Ee())})),n((function(){if(u&&J&&!M){var e=function(e){Ne.current&&!Ne.current.contains(e.target)&&Be(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}}),[u,J]),n((function(){Ae(Y)}),[Y]),n((function(){xe(u)}),[u]);var Be=function(e){M||(xe(e),ge(e))};return ke?e.createElement(r,{id:m},e.createElement("div",{id:s,className:i.joinClass("modal2",de&&"dark-mode",je&&"modal2-toggle",f&&"modal2-center",E),tabIndex:h,role:"dialog","aria-hidden":"true"},e.createElement("div",{ref:Ne,className:"modal2-content"},z&&!M&&e.createElement("div",{className:"modal2-close",onClick:function(){d.isFunc(Ce)?Ce():Be(!1)}},j||e.createElement(c,null)),b&&e.createElement("div",{className:i.joinClass("modal2-header",Q&&"split-border")},e.createElement("span",{className:i.joinClass("modal2-title",V&&"modal2-title-toggle"),onDoubleClick:function(){V&&(Ae(!je),re(!je))}},k),x),e.createElement("div",{className:"modal2-body"},l),N&&(L||e.createElement((function(){return e.createElement("div",{className:i.joinClass("modal2-footer",Q&&"split-border","CENTER"===B&&"align-center","LEFT"===B&&"align-left",y&&"button-full-width-mobile")},O&&!M&&e.createElement("button",{className:i.joinClass("modal2-button modal2-light-button",$),onClick:function(){Be(!1),ve()}},ne),X&&e.createElement("button",{className:i.joinClass("modal2-button modal2-primary-button",Z),onClick:function(){se()}},oe),I&&e.createElement("button",{className:i.joinClass("modal2-button modal2-danger-button",_),onClick:function(){pe()}},ae))}),null))))):null};export{c as ModalCloseIcon,r as ReactPortal,m as default};
